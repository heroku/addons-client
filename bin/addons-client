#!/usr/bin/env ruby

require 'bundler/setup'
require_relative '../lib/addons-client'

begin
  Addons::CLI.run!
rescue Addons::UserError => e
  STDERR.puts e.message and exit 1
rescue RestClient::ServiceUnavailable => e
  if ! e.response.body.strip.empty?
    STDERR.puts JSON.parse(e.response.body)['message']
  else
    STDERR.puts "Add-on is not available"
  end
  exit 1
end

